<?phpclass Theappnow_Baseprice_Block_Adminhtml_Price_Edit_Tab_Form extends Mage_Adminhtml_Block_Widget_Form{    protected function _prepareForm()    {        $form = new Varien_Data_Form();        $this->setForm($form);        if (Mage::getSingleton('adminhtml/session')->getBasepriceData()) {            $data = Mage::getSingleton('adminhtml/session')->getBasepriceData();            Mage::getSingleton('adminhtml/session')->getBasepriceData(null);        } elseif (Mage::registry('baseprice_data')) {            $data = Mage::registry('baseprice_data')->getData();        }        $fieldset = $form->addFieldset('baseprice_form', array(            'legend' => Mage::helper('baseprice')->__('Baseprice information')        ));        $fieldset->addField('price_value', 'text', array(            'label' => Mage::helper('baseprice')->__('Price Value'),            'class' => 'required-entry',            'required' => true,            'name' => 'price_value',        ));        $collection = Mage::getModel('catalog/category')->getCollection()            ->addAttributeToSelect('name')            ->addFieldToFilter('parent_id', array('eq' => 2));        $values = array();        $values[0] = '-- Please Select --';        foreach ($collection as $item) {            $values[$item->getId()] = $item->getName();            if ($item->hasChildren()) {                foreach ($item->getChildrenCategories() as $child) {                    $values[$child->getId()] = ' - ' . $child->getName();                }            }        }        $fieldset->addField('category_id', 'select', array(            'label' => Mage::helper('baseprice')->__('Category Name'),            'name' => 'category_id',            'onclick' => "",            'onchange' => "",            'required' => true,            'values' => $values        ));        /*Edit truong kieu date*/        $form->setValues($data);        return parent::_prepareForm();    }}?>